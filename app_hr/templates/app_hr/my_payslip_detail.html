{% load static %}

<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>รายละเอียดสลิปเงินเดือน</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
  <a href="{% url 'app_hr:my_payslips' %}" class="btn btn-link mb-3">&larr; กลับไปหน้ารายการสลิป</a>

  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <h2 class="h4 mb-3">สลิปเงินเดือน งวด {{ payslip.period.month }}/{{ payslip.period.year }}</h2>
      <p class="mb-1">พนักงาน: {{ employee.code }} - {{ employee.first_name }} {{ employee.last_name }}</p>
      <p class="mb-0 text-muted">ตำแหน่ง: {{ employee.position }} | แผนก: {{ employee.department }}</p>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-success text-white">
          รายรับ
        </div>
        <div class="card-body p-0">
          <table class="table mb-0 align-middle">
            <tbody>
            {% for item in items %}
              {% if item.item_type == 'earning' %}
                <tr>
                  <td>{{ item.name }}</td>
                  <td class="text-end">{{ item.amount }}</td>
                </tr>
              {% endif %}
            {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="card-footer text-end">
          <strong>รายรับรวม: {{ payslip.gross_income }}</strong>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-header bg-danger text-white">
          รายหัก
        </div>
        <div class="card-body p-0">
          <table class="table mb-0 align-middle">
            <tbody>
            {% for item in items %}
              {% if item.item_type == 'deduction' %}
                <tr>
                  <td>{{ item.name }}</td>
                  <td class="text-end">-{{ item.amount }}</td>
                </tr>
              {% endif %}
            {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="card-footer text-end">
          <strong>รายหักรวม: {{ payslip.total_deduction }}</strong>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-sm mt-3">
    <div class="card-body text-end">
      <span class="me-2">รับสุทธิ:</span>
      <span class="fs-4 fw-bold text-success">{{ payslip.net_income }}</span>
    </div>
  </div>
</div>
</body>
</html>
